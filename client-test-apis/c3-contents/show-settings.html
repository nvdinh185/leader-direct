<style>
    #login {
        margin-top: 20px;
    }
</style>
<div id="login">
    <div class="container">
        <div id="login-row" class="row justify-content-center align-items-center">
            <div id="login-column" class="col-12 col-xs-12 col-sm-10 col-md-8 col-lg-6">
                <div id="login-box" class="col-md-12">
                    <form id="login-form" class="form" action="" method="post">
                        <h3 class="text-center text-info">CÀI ĐẶT MÁY CHỦ</h3>

                        <div class="form-group">
                            <label for="server-socket" class="text-info">Máy chủ xác thực:</label><br>
                            <input type="text" name="server-socket" id="server-socket"
                                placeholder="https://socket.cng.vn" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="server-api" class="text-info">Máy chủ APIs:</label><br>
                            <input type="text" name="server-api" id="server-api" placeholder="https://socket.cng.vn"
                                class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="base-dir" class="text-info">Đường dẫn cơ sở (base):</label><br>
                            <input type="text" name="base-dir" id="base-dir" placeholder="/your-base"
                                class="form-control">
                        </div>
                        <div class="form-group">
                            <input type="button" id="send" class="btn btn-info btn-md" value="Lưu lại">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">

    $(document).ready(function () {
        $('#server-socket').val(API_PARAMS.getKey("SERVER_SOCKET", true) || API_PARAMS.SERVER_SOCKET);
        $('#server-api').val(API_PARAMS.getKey("SERVER_DOMAIN", true) || API_PARAMS.SERVER_DOMAIN);
        $('#base-dir').val(API_PARAMS.getKey("BASE_DIRECTORY", true) || API_PARAMS.BASE_DIRECTORY);
    });

    // delay để kiểm tra kết quả
    function debounce(fn, delay) {
        return args => {
            clearTimeout(fn.id)
            fn.id = setTimeout(() => {
                fn.call(this, args)
            }, delay)
        }
    }

    $("#send").click(function () {
        API_PARAMS.saveKey("SERVER_SOCKET", $('#server-socket').val(), true);
        API_PARAMS.saveKey("SERVER_DOMAIN", $('#server-api').val(), true);
        API_PARAMS.saveKey("BASE_DIRECTORY", $('#base-dir').val(), true);
        // hiển thị trạng thái và quay về trang chủ lại nhé
        // giả lập gửi lên mạng để lưu
        $("body").addClass("loading");
        setTimeout(() => {
            $("body").removeClass("loading");
            // quay về trang chủ - phải load lại trang không phải chèn nội sung
            // $('#content-nav').load("./templates/content.html");
            window.location.href = "index.html";
        }, 1000)
    });


</script>